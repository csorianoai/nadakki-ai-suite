# ═══════════════════════════════════════════════════════════════════════════════
# WORKFLOW 1: Weekly Optimization
# config/workflows/weekly_optimization.yaml
# ═══════════════════════════════════════════════════════════════════════════════

id: weekly_optimization
name: "Weekly Account Optimization"
description: "Standard weekly optimization routine. Runs search term cleanup, budget pacing check, and strategy review."
trigger: schedule_weekly
frequency: "every_monday_9am"
version: "1.0.0"

steps:
  - id: search_cleanup
    name: "Search Terms Cleanup"
    agent: search_cleaner
    action: analyze_and_clean
    params:
      industry: "financial_services"
      search_terms:
        - {term: "sample term", impressions: 100, clicks: 5, cost: 10, conversions: 1}
    on_failure: continue

  - id: budget_pacing
    name: "Budget Pacing Analysis"
    agent: budget_pacing
    action: analyze_and_plan
    params:
      industry: "financial_services"
      campaigns:
        - {campaign_id: "c1", campaign_name: "Search - Main", daily_budget: 100, spend_today: 50, spend_mtd: 1500, monthly_target: 3000}
    on_failure: continue

  - id: strategy_review
    name: "Strategic Review"
    agent: strategist
    action: propose_strategy
    params:
      context:
        goal: "leads"
        channel: "search"
        monthly_budget: 3000
        industry: "financial_services"
    on_failure: stop

  - id: summary
    name: "Generate Summary"
    agent: ""
    action: aggregate_results
    params:
      message: "Weekly optimization complete"
    on_failure: continue
