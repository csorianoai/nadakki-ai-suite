# ═══════════════════════════════════════════════════════════════════════════════
# WORKFLOW 4: Emergency Pause
# config/workflows/emergency_pause.yaml
# ═══════════════════════════════════════════════════════════════════════════════

id: emergency_pause
name: "Emergency Campaign Pause"
description: "Urgent workflow for pausing campaigns when CPA or spend exceeds critical thresholds."
trigger: alert
priority: critical
version: "1.0.0"

steps:
  - id: assess_situation
    name: "Assess Situation"
    agent: strategist
    action: analyze_performance
    params:
      metrics: {cpa: 150, ctr: 0.8, conv_rate: 1.0}
      industry: "financial_services"
    on_failure: continue

  - id: pacing_check
    name: "Check Budget Overspend"
    agent: budget_pacing
    action: get_pacing_summary
    params:
      campaigns:
        - {campaign_id: "c1", daily_budget: 100, spend_mtd: 2800, monthly_target: 1500}
      day_of_month: 15
    on_failure: continue

  - id: log_emergency
    name: "Log Emergency"
    agent: ""
    action: log
    params:
      message: "EMERGENCY: Critical performance thresholds exceeded. Campaigns flagged for pause."
    on_failure: continue
