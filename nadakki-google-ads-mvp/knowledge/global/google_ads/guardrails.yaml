# ═══════════════════════════════════════════════════════════════════════════════
# Nadakki Google Ads Knowledge Base - Guardrails
# knowledge/global/google_ads/guardrails.yaml
# ═══════════════════════════════════════════════════════════════════════════════

version: "1.0.0"
updated: "2026-02-02"

# Safety guardrails for automated operations.
# These are hard limits that CANNOT be overridden by tenant configs.

budget_guardrails:
  max_single_change_pct: 30         # Never change budget > 30% at once
  max_daily_budget_usd: 50000      # Absolute max per campaign
  min_daily_budget_usd: 1           # Minimum to avoid pausing
  min_days_between_changes: 1       # At least 1 day between budget changes
  max_changes_per_day: 3            # Max budget changes per campaign per day
  revert_if_cpa_increase_pct: 25    # Auto-revert if CPA increases > 25%

bidding_guardrails:
  learning_period_days: 14          # Don't change bids during learning
  max_target_cpa_multiplier: 2.0    # Never set target CPA > 2x historical
  min_conversions_for_tcpa: 30      # Need 30+ conversions before tCPA

campaign_guardrails:
  max_campaigns_per_account: 50     # Soft limit
  max_adgroups_per_campaign: 20     # Keep structure manageable
  max_keywords_per_adgroup: 30      # Avoid keyword stuffing
  min_ads_per_adgroup: 2            # Always test at least 2 ads

content_guardrails:
  forbidden_words:
    - "guaranteed"
    - "free money"
    - "get rich"
    - "no risk"
    - "100% guaranteed"
    - "risk-free"
    - "instant approval"
    - "no credit check"
  
  forbidden_patterns:
    - "\\d+% guaranteed"           # "5% guaranteed returns"
    - "earn \\$\\d+ per"           # "earn $500 per day"
  
  required_for_financial:
    - "Terms and conditions apply"
  
  max_headline_length: 30
  max_description_length: 90
  min_headlines_per_rsa: 8
  min_descriptions_per_rsa: 3

# Operations that require human approval
approval_required_for:
  - "budget_change_above_5000"
  - "campaign_pause"
  - "campaign_enable"
  - "bidding_strategy_change"
  - "new_campaign_creation"
  - "ad_copy_with_financial_claims"

# Rate limits for automated operations
rate_limits:
  operations_per_minute: 30
  operations_per_hour: 500
  budget_changes_per_day_per_campaign: 3
  api_calls_per_minute: 100

# Monitoring thresholds that trigger alerts
alert_triggers:
  - condition: "daily_spend > 2 * daily_budget"
    severity: critical
    action: "pause_campaign"
  - condition: "cpa > 3 * target_cpa"
    severity: critical
    action: "reduce_budget_50pct"
  - condition: "ctr < 1.0 AND impressions > 1000"
    severity: warning
    action: "review_ad_copy"
  - condition: "quality_score < 4"
    severity: warning
    action: "optimize_landing_page"
