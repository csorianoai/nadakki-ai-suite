# ═══════════════════════════════════════════════════════════════════════════════
# Nadakki Google Ads Knowledge Base - Rules
# knowledge/global/google_ads/rules.yaml
# ═══════════════════════════════════════════════════════════════════════════════
# Strategic decision rules based on Google Ads best practices.
# Multi-tenant: These are GLOBAL rules. Tenants can override in:
#   knowledge/{tenant_id}/google_ads/rules.yaml
# ═══════════════════════════════════════════════════════════════════════════════

version: "1.0.0"
updated: "2026-02-02"

rules:
  - id: rule_search_leads_01
    name: "Search Campaign Structure for Leads"
    tags: [search, leads, structure]
    when:
      goal: leads
      channel: search
    then:
      recommendations:
        - "Use exact + phrase match types at launch"
        - "Separate adgroups by intent (high/medium/low)"
        - "Activate negatives from week 1"
        - "Dedicated landing page per adgroup"
      kpis: [cpl, conv_rate, search_impression_share]
    confidence: 0.9
    source: "Google Ads course - Module 3"

  - id: rule_budget_start_02
    name: "Budget Starting Strategy"
    tags: [budget, launch, optimization]
    when:
      phase: launch
      data_available: false
    then:
      recommendations:
        - "Start with conservative daily budget (2-3x target CPA)"
        - "Use maximize conversions bidding first 2 weeks"
        - "Switch to target CPA after 30+ conversions"
        - "Never change budget more than 20% at once"
      kpis: [daily_spend, conversions, cpa]
    confidence: 0.85
    source: "Google Ads course - Module 5"

  - id: rule_quality_score_03
    name: "Quality Score Optimization"
    tags: [quality_score, optimization, ads]
    when:
      quality_score_below: 6
    then:
      recommendations:
        - "Review ad relevance: ensure keywords appear in headlines"
        - "Improve landing page experience (load time < 3s)"
        - "Increase expected CTR with better ad copy"
        - "Add at least 3 responsive search ads per adgroup"
      kpis: [quality_score, ctr, landing_page_experience]
    confidence: 0.9
    source: "Google Ads course - Module 4"

  - id: rule_negative_keywords_04
    name: "Negative Keywords Management"
    tags: [negatives, search_terms, waste]
    when:
      wasted_spend_pct_above: 15
    then:
      recommendations:
        - "Review search terms report weekly (minimum)"
        - "Add negatives at campaign and adgroup level"
        - "Create shared negative keyword lists"
        - "Flag terms with spend > $10 and zero conversions"
      kpis: [wasted_spend_pct, search_term_relevance]
    confidence: 0.95
    source: "Google Ads course - Module 6"

  - id: rule_rsa_best_practice_05
    name: "Responsive Search Ad Best Practices"
    tags: [rsa, ad_copy, creative]
    when:
      ad_type: rsa
    then:
      recommendations:
        - "Use all 15 headline slots"
        - "Include keyword in at least 3 headlines"
        - "Pin critical brand message to position 1"
        - "Test 2 different CTA variations"
        - "Use all 4 description slots"
      constraints:
        max_headline_length: 30
        max_description_length: 90
        min_headlines: 8
        min_descriptions: 3
      kpis: [ad_strength, ctr, conv_rate]
    confidence: 0.9
    source: "Google Ads course - Module 4"

  - id: rule_financial_compliance_06
    name: "Financial Services Ad Compliance"
    tags: [compliance, financial, legal]
    when:
      industry: financial_services
    then:
      recommendations:
        - "Never use 'guaranteed' in ad copy"
        - "Include required disclaimers per jurisdiction"
        - "Avoid mentioning specific interest rates in ads"
        - "Always link to terms and conditions page"
      forbidden_words:
        - "guaranteed returns"
        - "risk-free"
        - "get rich quick"
        - "free money"
        - "100% guaranteed"
        - "no risk"
      required_elements:
        - "Licensed and regulated disclosure"
      kpis: [ad_disapproval_rate, policy_violations]
    confidence: 0.95
    source: "Google Ads Financial Services Policy"

  - id: rule_bidding_strategy_07
    name: "Bidding Strategy Selection"
    tags: [bidding, strategy, automation]
    when:
      conversions_last_30d_above: 30
    then:
      recommendations:
        - "Switch to target CPA or target ROAS"
        - "Set target CPA at historical average + 10%"
        - "Allow 2 weeks learning period after change"
        - "Don't adjust bid strategy during learning"
      kpis: [cpa, roas, conversion_value]
    confidence: 0.85
    source: "Google Ads course - Module 5"

  - id: rule_performance_max_08
    name: "Performance Max Campaign Usage"
    tags: [pmax, campaign_type, automation]
    when:
      campaign_type: performance_max
    then:
      recommendations:
        - "Provide high-quality assets (images, videos, text)"
        - "Use audience signals based on customer data"
        - "Set clear conversion goals before launch"
        - "Run alongside Search campaigns, not as replacement"
        - "Monitor asset performance weekly"
      kpis: [conversions, roas, asset_performance]
    confidence: 0.8
    source: "Google Ads course - Module 7"

  - id: rule_low_ctr_fix_09
    name: "Fix Low CTR"
    tags: [ctr, optimization, urgency]
    when:
      ctr_below: 2.0
      impressions_above: 1000
    then:
      recommendations:
        - "Test new headlines with stronger CTAs"
        - "Add sitelink and callout extensions"
        - "Review keyword-to-ad relevance"
        - "Consider pausing underperforming ads"
        - "Check competitor positioning"
      priority: high
      kpis: [ctr, impression_share, avg_position]
    confidence: 0.9
    source: "Google Ads course - Module 4"

  - id: rule_scaling_budget_10
    name: "Budget Scaling Rules"
    tags: [budget, scaling, growth]
    when:
      cpa_below_target: true
      budget_utilization_above: 90
    then:
      recommendations:
        - "Increase budget by 15-20% (never more than 30%)"
        - "Wait 3-5 days between budget changes"
        - "Monitor CPA for 48 hours after increase"
        - "If CPA rises > 20%, revert immediately"
      guardrails:
        max_increase_pct: 30
        min_days_between_changes: 3
        cpa_revert_threshold_pct: 20
      kpis: [daily_budget, cpa, conversions, impression_share]
    confidence: 0.85
    source: "Google Ads course - Module 5"
