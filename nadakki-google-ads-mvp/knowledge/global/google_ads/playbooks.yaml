# ═══════════════════════════════════════════════════════════════════════════════
# Nadakki Google Ads Knowledge Base - Playbooks
# knowledge/global/google_ads/playbooks.yaml
# ═══════════════════════════════════════════════════════════════════════════════

version: "1.0.0"
updated: "2026-02-02"

playbooks:
  - id: playbook_new_account_setup
    name: "New Account Setup"
    description: "Step-by-step guide for setting up a new Google Ads account"
    trigger: "new_tenant_onboarding"
    steps:
      - order: 1
        action: "verify_conversion_tracking"
        description: "Ensure conversion tracking is properly configured"
        check: "At least 1 conversion action active"
      - order: 2
        action: "create_campaign_structure"
        description: "Create campaigns based on goals (search, display, pmax)"
        check: "At least 1 campaign created"
      - order: 3
        action: "setup_negative_keywords"
        description: "Add initial negative keyword lists"
        check: "Shared negative list created with 50+ terms"
      - order: 4
        action: "create_rsa_ads"
        description: "Create responsive search ads for each adgroup"
        check: "Each adgroup has 2+ RSA ads"
      - order: 5
        action: "configure_extensions"
        description: "Add sitelinks, callouts, structured snippets"
        check: "At least 4 sitelinks and 4 callouts active"
      - order: 6
        action: "set_initial_budget"
        description: "Configure daily budget based on monthly target"
        check: "Daily budget = monthly budget / 30.4"
    estimated_time_minutes: 60

  - id: playbook_weekly_optimization
    name: "Weekly Optimization"
    description: "Standard weekly optimization routine"
    trigger: "schedule_weekly"
    frequency: "every_monday"
    steps:
      - order: 1
        action: "review_search_terms"
        description: "Check search terms report, add negatives"
        agent: "SearchTermsCleanerIA"
        check: "All terms with spend > $10 and 0 conversions flagged"
      - order: 2
        action: "check_budget_pacing"
        description: "Verify budget utilization and pacing"
        agent: "GoogleAdsBudgetPacingIA"
        check: "All campaigns within 85-110% pacing"
      - order: 3
        action: "review_ad_performance"
        description: "Check RSA ad strength and performance"
        agent: "RSAAdCopyGeneratorIA"
        check: "No ads with 'Poor' ad strength"
      - order: 4
        action: "check_quality_scores"
        description: "Review keywords with QS below 6"
        check: "Action plan for any keyword with QS < 6"
      - order: 5
        action: "generate_report"
        description: "Compile weekly performance summary"
        check: "Report includes WoW comparison"
    estimated_time_minutes: 30

  - id: playbook_budget_adjustment
    name: "Budget Adjustment Protocol"
    description: "Safe protocol for changing campaign budgets"
    trigger: "budget_change_requested"
    steps:
      - order: 1
        action: "analyze_current_performance"
        description: "Check current CPA, ROAS, and pacing"
        check: "Performance data from last 7 days available"
      - order: 2
        action: "calculate_safe_change"
        description: "Determine max safe budget change (never > 30%)"
        check: "Change amount within guardrails"
      - order: 3
        action: "check_policy"
        description: "Validate against PolicyEngine rules"
        check: "PolicyEngine returns ALLOW or REQUIRE_APPROVAL"
      - order: 4
        action: "execute_change"
        description: "Apply budget change via Connector"
        check: "SagaJournal records change with compensation data"
      - order: 5
        action: "monitor_48h"
        description: "Flag for 48-hour monitoring period"
        check: "Alert set if CPA increases > 20%"
    estimated_time_minutes: 15

  - id: playbook_emergency_pause
    name: "Emergency Campaign Pause"
    description: "Protocol for pausing campaigns in emergency situations"
    trigger: "emergency_detected"
    priority: critical
    steps:
      - order: 1
        action: "identify_problem_campaigns"
        description: "Find campaigns with CPA > 3x target or budget overspend"
        check: "Problem campaigns identified"
      - order: 2
        action: "pause_campaigns"
        description: "Pause affected campaigns immediately"
        check: "All problem campaigns paused"
      - order: 3
        action: "notify_stakeholders"
        description: "Send alert to tenant administrators"
        check: "Notification sent"
      - order: 4
        action: "document_incident"
        description: "Record incident in SagaJournal with full context"
        check: "Saga created with all details"
      - order: 5
        action: "plan_recovery"
        description: "Generate recovery plan with StrategistIA"
        check: "Recovery ActionPlan created"
    estimated_time_minutes: 10

  - id: playbook_new_campaign_launch
    name: "New Campaign Launch"
    description: "Checklist for launching a new campaign"
    trigger: "campaign_creation_requested"
    steps:
      - order: 1
        action: "strategy_review"
        description: "StrategistIA generates campaign strategy"
        agent: "GoogleAdsStrategistIA"
        check: "ActionPlan with strategy approved"
      - order: 2
        action: "keyword_research"
        description: "Generate keyword list based on strategy"
        check: "At least 20 keywords per adgroup"
      - order: 3
        action: "ad_copy_creation"
        description: "Generate RSA ads for each adgroup"
        agent: "RSAAdCopyGeneratorIA"
        check: "2+ RSAs per adgroup, all pass content validation"
      - order: 4
        action: "budget_allocation"
        description: "Set initial budget and bidding strategy"
        agent: "GoogleAdsBudgetPacingIA"
        check: "Budget within policy limits"
      - order: 5
        action: "pre_launch_review"
        description: "Final review of all campaign settings"
        check: "All preflight checks passed"
      - order: 6
        action: "launch"
        description: "Activate campaign"
        check: "Campaign status = ENABLED"
      - order: 7
        action: "post_launch_monitoring"
        description: "Set up 72-hour intensive monitoring"
        check: "Monitoring alerts configured"
    estimated_time_minutes: 45
